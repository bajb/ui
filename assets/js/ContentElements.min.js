function initExample(){$(".query-builder").qb("init"),$(".getData").on("click",function(){console.table($(this).prev(".qb-container").qb("getRules"))})}var QueryBuilder={options:[],data:[],configuration:{}},QueryBuilderComparators={BETWEEN:"between",IN:"in",IN_CASE_SENSITIVE:"in_sensitive",EQUAL:"equal",EXACT:"exact",LIKE:"like",STARTS:"starts",ENDS:"ends",IPRANGE:"iprange",RANGE:"range",GREATER:"greater",LESS:"less"},QueryBuilderValueMode={TEXT:"text",SELECT:"select",TOKEN:"token",SELEXT:"selext"};+function(a){var b={key:"",display:"",comparators:[QueryBuilderComparators.EQUAL],values:["UK","US","AU"],ajaxUrl:"",mode:QueryBuilderValueMode.TEXT};QueryBuilder.addOption=function(a){this.data.push(a)},QueryBuilder.init=function(){console.log("Starting Query Builder"),QueryBuilder.configuration={},QueryBuilder.options=QueryBuilder.data=[],QueryBuilder.addOption(b),console.log(QueryBuilder),console.log("Completed Query Builder Init")},a.fn.qb=function(b,c){function d(b,c){var d=a('<div class="qb-rule"/>'),g=a('<select class="qb-key"/>').appendTo(d),h=b?b.key:null,i=h?f[h]:null;if(g.append("<option/>"),a.each(f,function(a){var b=h==a;g.append('<option value="'+a+'"'+(b?' selected="selected"':"")+">"+this.display+"</option>")}),i){var j=a('<select class="qb-comparator"/>').appendTo(d);a.each(i.comparators,function(a){var c=b.comparator==a;j.append('<option value="'+a+'"'+(c?' selected="selected"':"")+">"+this+"</option>")}),a('<input class="qb-value" type="text" value="'+(b.value?b.value:"")+'"/>').appendTo(d)}a('<button class="qb-delRule"><i class="fa fa-trash"></i></button>').appendTo(d),"undefined"!=typeof c?a(".qb-rule:eq("+c+")",e).replaceWith(d):d.appendTo(a(".qb-rules",e))}var e=a(this);e.addClass("qb-container");var f=e.data("qb.options"),g=e.data("qb.rules");switch(b){case"init":return void e.each(function(){var b=a(this),c=b.attr("data-qb-options"),d=b.attr("data-qb-rules");c&&a.getJSON(c,{},function(a){b.qb("options",a)}),d&&a.getJSON(d,{},function(a){b.qb("rules",a)})});case"options":f=c,e.data("qb.options",f);break;case"rules":g=c,e.data("qb.rules",g);break;case"addRule":var h=Array.prototype.slice.call(arguments);return h.shift(),void d.apply(this,h);case"getRules":var i=[];return a(".qb-rules .qb-rule",e).each(function(){i.push({key:a(".qb-key",this).val(),comparator:a(".qb-comparator",this).val(),value:a(".qb-value",this).val()})}),i;default:return}f&&g&&(a('<div class="qb-rules"/>').appendTo(e),a.each(g,function(){d(this)}),a('<button class="qb-addRule">+</button>').appendTo(e))},a(document).on("change",".qb-rule .qb-key",function(){a(this).closest(".qb-container").qb("addRule",{key:a(this).val()},a(this).parent().index())}),a(document).on("click","button.qb-delRule",function(){a(this).closest(".qb-rules.qb-rule").remove()}),a(document).on("click","button.qb-addRule",function(){a(this).closest(".qb-container").qb("addRule")})}(jQuery),$(initExample);var FortifiContentElements={};