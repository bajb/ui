var FortifiContentElements={};!function(p,t,s){"use strict";t.QueryBuilderConstants=t.QueryBuilderConstants||{};var a="querybuilder",h=a+".rule";function n(t){this.key="",this.displayName="- SELECT -",this.dataType=QueryBuilderConstants.DATATYPE_STRING,this.comparators=[QueryBuilderConstants.COMPARATOR_EQUALS],this.showSingleComparator=null,this.inputType=null,this.required=!1,this.unique=!1,this.values=null,this.valuesUrl="",this.strictValues=!0,this.count=0;var e,n=this;t&&p.each(t,function(t,e){n.hasOwnProperty(t)&&(n[t]=e)}),this.values&&this.values instanceof Array&&(e={},p(this.values).each(function(t){n.dataType===QueryBuilderConstants.DATATYPE_NUMBER||n.dataType===QueryBuilderConstants.DATATYPE_BOOL?e[t]=n.values[t]:e[n.values[t]]=n.values[t]}),this.values=e)}function o(t,e,n,i){var r;e&&(r=t.getDefinition(e))&&!n&&(n=r.comparators[0]),this._valCache={},this._queryBuilder=t,this._key=e||"",this._comparator=n||"eq",i instanceof Object&&(i=p.grep(i,function(t){return!!t})).length&&r&&r.values&&!r.valuesUrl&&(i=p.grep(i,function(t){return r.values.hasOwnProperty(t)})),this._value=this.sanitizeValue(null===i||i===s?null:i),this._element=null}function d(){var t=this._queryBuilder.getInputTypeForRule(this);if(!t)throw"Input type not found for "+this.getComparator()+" "+this.getDefinition().dataType;var e=this;return new t(this.getDefinition(),this.getComparator(),this.getValue(),function(t){e._setValue(t)})}QueryBuilderConstants.INPUT_TEXT="text",QueryBuilderConstants.INPUT_NUMBER="number",QueryBuilderConstants.INPUT_DECIMAL="decimal",QueryBuilderConstants.INPUT_SELECT="select",QueryBuilderConstants.INPUT_DATE="date",QueryBuilderConstants.INPUT_BOOL="bool",QueryBuilderConstants.INPUT_AGE="age",QueryBuilderConstants.INPUT_BETWEEN="between",QueryBuilderConstants.DATATYPE_STRING="string",QueryBuilderConstants.DATATYPE_NUMBER="number",QueryBuilderConstants.DATATYPE_DECIMAL="decimal",QueryBuilderConstants.DATATYPE_DATE="date",QueryBuilderConstants.DATATYPE_TIMESTAMP_DAY="timestamp_day",QueryBuilderConstants.DATATYPE_BOOL="bool",QueryBuilderConstants.COMPARATOR_EQUALS="eq",QueryBuilderConstants.COMPARATOR_NOT_EQUALS="neq",QueryBuilderConstants.COMPARATOR_EQUALS_INSENSITIVE="eqi",QueryBuilderConstants.COMPARATOR_NOT_EQUALS_INSENSITIVE="neqi",QueryBuilderConstants.COMPARATOR_IN="in",QueryBuilderConstants.COMPARATOR_NOT_IN="nin",QueryBuilderConstants.COMPARATOR_CONTAINS="contains",QueryBuilderConstants.COMPARATOR_DOES_NOT_CONTAIN="dncontain",QueryBuilderConstants.COMPARATOR_GREATER="gt",QueryBuilderConstants.COMPARATOR_GREATER_EQUAL="gte",QueryBuilderConstants.COMPARATOR_LESS="lt",QueryBuilderConstants.COMPARATOR_LESS_EQUAL="lte",QueryBuilderConstants.COMPARATOR_BETWEEN="bet",QueryBuilderConstants.COMPARATOR_NOT_BETWEEN="nbet",QueryBuilderConstants.COMPARATOR_LIKE="like",QueryBuilderConstants.COMPARATOR_NOT_LIKE="nlike",QueryBuilderConstants.COMPARATOR_LIKE_IN="likein",QueryBuilderConstants.COMPARATOR_NOT_LIKE_IN="nlikein",QueryBuilderConstants.COMPARATOR_STARTS="starts",QueryBuilderConstants.COMPARATOR_NOT_STARTS="nstarts",QueryBuilderConstants.COMPARATOR_ENDS="ends",QueryBuilderConstants.COMPARATOR_NOT_ENDS="nends",QueryBuilderConstants.COMPARATOR_BEFORE="before",QueryBuilderConstants.COMPARATOR_AFTER="after",p.fn.QueryBuilder=function(i){var r=Array.prototype.slice.call(arguments);if(i?"object"==typeof i&&(i="init",r.unshift("init")):i="init","function"!=typeof u.prototype[i])throw"QueryBuilder command '"+i+"' not found";r.shift();var s=p(this);return p(this).each(function(){var t=p(this),e=t.data(a);e||(t.data(a,new u(this)),e=t.data(a));var n=e[i].apply(e,r);n&&(s=n)}),s},n.prototype.getDataType=function(){return this.dataType?this.dataType:QueryBuilderConstants.DATATYPE_STRING},n.prototype.hasValues=function(){return!!this.values},n.prototype.hasAjaxValues=function(){return!!this.valuesUrl},n.prototype.isStrict=function(){return this.strictValues&&(this.values||this.valuesUrl)},o.prototype.getValue=function(){return this._value},o.prototype.sanitizeValue=function(t){var e=d.call(this);return e&&e.sanitize&&(t=e.sanitize(t)),t},o.prototype.setValue=function(t){this._setValue(this.sanitizeValue(t))},o.prototype._setValue=function(t){t===s&&(t=null),this._value!==t&&(this._value=this._valCache[this._comparator]=t,this._queryBuilder._triggerChangeEvent())},o.prototype.getComparator=function(){return this._comparator},o.prototype.setComparator=function(t){this._comparator=t,this._element&&p(".qb-comparator",this._element).length&&p(".qb-comparator",this._element).val(t),null!==this._valCache[this._comparator]&&this._valCache[this._comparator]!==s?this.setValue(this._valCache[this._comparator]):this.setValue(this.getValue()),this.render(),this._queryBuilder._triggerChangeEvent()},o.prototype.getKey=function(){return this._key},o.prototype.setKey=function(t){this._queryBuilder.changeCount(this._key,t),this._key=t,this._element&&p(".qb-key",this._element).val(t);var e=this.getDefinition().comparators;-1===e.indexOf(this.getComparator())?this.setComparator(e[0]):this.setValue(null),this.render(),this._queryBuilder._triggerChangeEvent(),this._queryBuilder.refreshNew()},o.prototype.render=function(){var i=this,t=p('<div class="qb-rule"/>'),r=p('<select class="qb-key"/>'),s=this.getKey();t.data(h,this),t.append(r);var e,a,n,o,u=this.getDefinition();u||r.append('<option selected="selected" value="'+s+'">'+s+"</option>"),p.each(this._queryBuilder.definitions(),function(t,e){var n=p('<option value="'+e.key+'">'+this.displayName+"</option>");s===e.key&&n.prop("selected",!0),e.unique&&(n.addClass("unique-"+e.key),i._queryBuilder.getCount(e.key)&&n.prop("disabled",!0)),r.append(n)}),u&&(u.required&&u.count<=1&&r.prop("disabled",!0),u.dataType||(u.dataType="string"),u.comparators||(u.comparators=["eq"]),e=1<u.comparators.length,1===u.comparators.length&&(e=null===u.showSingleComparator?u.comparators[0]!==QueryBuilderConstants.COMPARATOR_EQUALS:u.showSingleComparator),e&&(a=p('<select class="qb-comparator"/>'),p.each(u?u.comparators:[QueryBuilderConstants.COMPARATOR_EQUALS],function(t,e){var n=i.getComparator()===e?' selected="selected"':"";a.append("<option"+n+' value="'+e+'">'+i._queryBuilder.getComparatorName(e)+"</option>")}),t.append(a)),o=(n=d.call(this)).render(),null===this.getValue()&&u.hasValues()&&n instanceof A&&this.setValue(Object.keys(u.values)[0]),t.append(o),n.postRender&&n.postRender());var l=p('<button class="qb-button qb-remove-rule"><span class="fa fa-trash"></span></button>');return t.append(l),u&&u.required&&u.count<=1&&l.prop("disabled",!0),!u&&this.getKey()&&(r.prop("disabled",!0),a.prop("disabled",!0),o.prop("disabled",!0)),this._element?(this._element.replaceWith(t),this._element=t,p(this._queryBuilder._ele).trigger("render.querybuilder",this)):this._element=t,t},o.prototype.getDefinition=function(){return this._queryBuilder.getDefinition(this.getKey())},o.prototype.getData=function(){return{key:this.getKey(),comparator:this.getComparator(),value:this.getValue()}},o.prototype.removeElement=function(){this._element&&this._element.remove()},o.prototype.getElement=function(){return this._element};var i=[];function u(t){this._ele=t,this._options={},this._definitions=[],this._hasRunInit=!1,this._comparatorNames={},this.setComparatorName(QueryBuilderConstants.COMPARATOR_EQUALS,"Equals"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_EQUALS_INSENSITIVE,"Equals (insensitive)"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_EQUALS_INSENSITIVE,"Does Not Equal (insensitive)"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_EQUALS,"Does Not Equal"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_IN,"In"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_IN,"Not In"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_CONTAINS,"Contains"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_DOES_NOT_CONTAIN,"Does Not Contain"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_GREATER,"Greater Than"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_GREATER_EQUAL,"Greater Than or Equal to"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_LESS,"Less Than"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_LESS_EQUAL,"Less Than or Equal to"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_BETWEEN,"Between"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_BETWEEN,"Not Between"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_LIKE_IN,"Like In"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_LIKE_IN,"Not Like In"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_LIKE,"Like"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_LIKE,"Not Like"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_STARTS,"Starts With"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_STARTS,"Does Not Start With"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_ENDS,"Ends With"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_ENDS,"Does Not End With"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_BEFORE,"Was Before"),this.setComparatorName(QueryBuilderConstants.COMPARATOR_AFTER,"Was After"),u.addInputTypeProcessor(function(t,e){var n=e?e.getDataType():QueryBuilderConstants.DATATYPE_STRING;return n===QueryBuilderConstants.DATATYPE_NUMBER?R:n===QueryBuilderConstants.DATATYPE_DECIMAL?T:void 0}),u.addInputTypeProcessor(function(t,e){if((e?e.getDataType():QueryBuilderConstants.DATATYPE_STRING)===QueryBuilderConstants.DATATYPE_BOOL)return C}),u.addInputTypeProcessor(function(t,e){if((e?e.getDataType():QueryBuilderConstants.DATATYPE_STRING)===QueryBuilderConstants.DATATYPE_DATE)return v}),u.addInputTypeProcessor(function(t,e){if((e?e.getDataType():QueryBuilderConstants.DATATYPE_TIMESTAMP_DAY)===QueryBuilderConstants.DATATYPE_TIMESTAMP_DAY)return E}),u.addInputTypeProcessor(function(t,e){if(t===QueryBuilderConstants.COMPARATOR_BETWEEN||t===QueryBuilderConstants.COMPARATOR_NOT_BETWEEN)return M}),u.addInputTypeProcessor(function(t,e){if(t===QueryBuilderConstants.COMPARATOR_BEFORE||t===QueryBuilderConstants.COMPARATOR_AFTER)return P}),u.addInputTypeProcessor(function(t,e){if(e&&e.hasValues()&&e.isStrict())return A}),this._rules=[new o(this,"","",null)],this._initialisedRules=!1,this._initialisedDefinitions=!1}function r(t){var e,n;0<this._definitions.length?l.call(this,t):(e=this,n=setInterval(function(){0<e._definitions.length&&(l.call(e,t),clearInterval(n))},100))}function l(t){for(var i=this;this._rules.length;)i.removeRule(this._rules[0]);t&&(p.each(t,function(t){var e=i.getDefinition(t),n=e?e.comparators[0]:"eq";"object"!=typeof this||this instanceof String?i.addRule(t,n,this):"key"in this&&"comparator"in this&&"value"in this?i.addRule(this.key,this.comparator,this.value):1===this.length?i.addRule(t,n,this[0]):i.addRule(t,"in",this)}),i._initialisedRules=!0,this.redraw())}function e(t,n){var e,i=p("<select/>");return n&&-1===Object.keys(t).indexOf(n)&&((e=p("<option/>").text(n).attr("value",n)).prop("selected",!0),e.prop("disabled",!0),i.append(e)),p.each(t,function(t){var e=p("<option/>").text(this).attr("value",t);t===n&&e.prop("selected",!0),i.append(e)}),i}u.prototype.setComparatorName=function(t,e){this._comparatorNames[t]=e},u.prototype.getComparatorName=function(t){return this._comparatorNames[t]?this._comparatorNames[t]:t},u.addInputTypeProcessor=function(t){i.push(t)},u.getInputType=function(t,e){var n=_;return p(i).each(function(){n=this(t,e)||n}),n},u.prototype.getInputTypeForRule=function(t){var e=t.getDefinition();return e&&e.inputType?e.inputType:u.getInputType(t.getComparator(),e)},u.prototype.init=function(t){var e,n=p(this._ele);this._hasRunInit||((e=p('<select class="qb-add-rule"></select>')).append('<option selected="selected" value="">- SELECT -</option>'),n.addClass("qb-container").html(p('<div class="qb-rules"/>')).append(e).on("change",".qb-add-rule",function(){p(this).closest(".qb-container").data(a).addRule(p(this).val())}).on("change",".qb-rule .qb-key",function(){p(this).closest(".qb-rule").data(h).setKey(p(this).val())}).on("change",".qb-rule .qb-comparator",function(){p(this).closest(".qb-rule").data(h).setComparator(p(this).val())}).on("click",".qb-rule .qb-remove-rule",function(t){var e=p(this).closest(".qb-container").data(a),n=p(this).closest(".qb-rule").data(h);e.removeRule(n),t.stopPropagation()}),n.trigger("init.querybuilder",[u,this])),this._hasRunInit=!0,t=p.extend({},n.data(),t),this.options(t),this._options&&"definitions"in this._options&&this._options.definitions&&this.definitions(this._options.definitions),this._options&&"rules"in this._options&&this._options.rules&&this.rules(this._options.rules)},u.prototype.options=function(t){if(t===s)return this._options;this._options=t,this.redraw()},u.prototype.definitions=function(t){var e=this;if(t===s)return this._definitions;this._initialisedDefinitions=!1,"string"==typeof t?p.getJSON(t,{},function(t){e._definitions=[],p.each(t,function(){e._definitions.push(new n(this))}),e._initialisedDefinitions=!0,e.redraw()}):(this._definitions=[],p.each(t,function(){e._definitions.push(new n(this))}),e._initialisedDefinitions=!0,this.redraw())},u.prototype.getDefinition=function(t){var e=null;return p.each(this._definitions,function(){if(this.key===t)return e=this,!1}),e},u.prototype._triggerChangeEvent=function(){p(this._ele).trigger("change.querybuilder",[this.rules()])},u.prototype.refreshNew=function(){var i=this,r=p(".qb-add-rule",this._ele).empty();r.append('<option selected="selected" value="">- SELECT -</option>'),p.each(this.definitions(),function(t,e){var n=p('<option value="'+e.key+'">'+this.displayName+"</option>");e.unique&&(n.addClass("unique-"+e.key),i.getCount(e.key)?n.prop("disabled",!0):n.prop("disabled",!1)),r.append(n)})},u.prototype.rules=function(t){var e=this;if(t===s){var n=[];return p(this._rules).each(function(){var t=this.getData();t.key&&null!==t.value&&n.push(t)}),n}if(this._initialisedRules=!1,"object"==typeof t)return r.call(this,t),null;if("function"==typeof t)return r.call(this,t()),null;if("string"==typeof t)return p.getJSON(t,{},function(t){r.call(e,t)}),null;throw"Unknown data format for rules"},u.prototype.addRule=function(t,e,n){this.incrementCounter(t);var i,r,s=new o(this,t,e,n);s.getDefinition()&&(this._rules.push(s),this._initialisedDefinitions&&(s.getValue()||(i=this.getInputTypeForRule(s),s.setValue(i.defaultValue(s.getDefinition()))),r=s.render(),p(".qb-rules",this._ele).append(r),p(this._ele).trigger("render.querybuilder",s))),this.refreshNew()},u.prototype.redraw=function(){var n;this._initialisedDefinitions&&(p(".qb-rules",(n=this)._ele).empty(),p.each(this._rules,function(){var t=this.render();p(".qb-rules",n._ele).append(t),p(n._ele).trigger("render.querybuilder",this)}),n._definitions&&(p.each(n._definitions,function(){var t,e;this.required&&(t=this,e=!1,p.each(n._rules,function(){this.getKey()===t.key&&(e=!0)}),e||n.addRule(t.key,t.comparators[0],null))}),this._definitions.length&&p.each(this._definitions,function(){this.unique||0})),this._initialisedRules&&n._triggerChangeEvent(),this.refreshNew())},u.prototype.removeRule=function(e){var n=this,t=e.getKey();this.decrementCounter(t),e.removeElement(),p.each(this._rules,function(t){this===e&&n._rules.splice(t,1)}),this._triggerChangeEvent(),this.refreshNew()},u.prototype.getCount=function(t){var e=this.getDefinition(t);return e?e.count:0},u.prototype.changeCount=function(t,e){this.decrementCounter(t),this.incrementCounter(e)},u.prototype.incrementCounter=function(t){var e=this.getDefinition(t);e&&(e.count++,e.unique&&p(".qb-key .unique-"+t,this._ele).prop("disabled",!0),e.required&&1<e.count&&p.each(this._rules,function(){this.getKey()===t&&(p(".qb-remove-rule",this.getElement()).prop("disabled",!1),p(".qb-key",this.getElement()).prop("disabled",!1))}))},u.prototype.decrementCounter=function(t){var e=this.getDefinition(t);e&&(e.count--,e.unique&&0===e.count&&p(".qb-key .unique-"+t,this._ele).prop("disabled",!1),e.required&&1===e.count&&p.each(this._rules,function(){this.getKey()===t&&p(".qb-remove-rule",this.getElement()).prop("disabled",!0)}))};var _=(c.defaultValue=function(t){return""},c.prototype.render=function(){var t=this;return p('<input type="text"/>').attr("value",this._value).on("change",function(){t._changeCb(p(this).val())})},c);function c(t,e,n,i){this._comparator=e,this._definition=t,this._changeCb=i,this._value=null===n?c.defaultValue(t):n,this._changeCb(this._value)}var C=(y.defaultValue=function(t){return"1"},y.prototype.render=function(){var t=this;return e({1:"True",0:"False"},this._value).on("change",function(){t._changeCb(p(this).val())})},y);function y(t,e,n,i){this._comparator=e,this._definition=t,this._changeCb=i,this._value=null===n?y.defaultValue(t):n,this._changeCb(this._value)}var A=(f.defaultValue=function(t){return Object.keys(t.values)[0]},f.prototype.sanitize=function(t){return"object"==typeof t&&t&&t.length?0<t.length?t[0]:null:t},f.prototype.render=function(){var t=this;return e(this._definition.values,this._value).on("change",function(){t._changeCb(p(this).val())})},f);function f(t,e,n,i){this._comparator=e,this._definition=t,this._changeCb=i,this._value=null===n?f.defaultValue(t):n,this._changeCb(this._value)}var T=(O.defaultValue=function(t){return 0},O.prototype.render=function(){var t=this;return p('<input type="number" step="0.01" />').attr("value",this._value).on("change",function(){t._changeCb(p(this).val())})},O);function O(t,e,n,i){this._comparator=e,this._definition=t,this._changeCb=i,this._value=null===n?O.defaultValue(t):n,this._changeCb(this._value)}var R=(m.defaultValue=function(t){return 0},m.prototype.render=function(){var t=this;return p('<input type="number" />').attr("value",this._value).on("change",function(){t._changeCb(p(this).val())})},m);function m(t,e,n,i){this._comparator=e,this._definition=t,this._changeCb=i,this._value=null===n?m.defaultValue(t):n,this._changeCb(this._value)}var v=(g.defaultValue=function(t){return e=new Date,n=e.getFullYear(),n+="-"+("0"+(e.getMonth()+1)).slice(-2),n+="-"+("0"+e.getDate()).slice(-2);var e,n},g.prototype.render=function(){var t=this;return p('<input type="date" />').val(this._value).on("change",function(){t._changeCb(p(this).val())})},g);function g(t,e,n,i){this._comparator=e,this._definition=t,this._changeCb=i,this._value=null===n||0===parseInt(n)?g.defaultValue(t):n,this._changeCb(this._value)}var E=(B.defaultValue=function(t){return N(new Date)},B.prototype.render=function(){var t=new Date;t.setTime(1e3*this._value);var e,n,i=this;return p('<input type="date" />').val((n=(e=t).getFullYear(),n+="-"+("0"+(e.getMonth()+1)).slice(-2),n+="-"+("0"+e.getDate()).slice(-2))).on("change",function(){i._changeCb(N(new Date(p(this).val()),i._comparator))})},B);function B(t,e,n,i){this._comparator=e,this._definition=t,this._changeCb=i,n=n&&0!==parseInt(n)?parseInt(n):B.defaultValue(t),this._value=N(new Date(1e3*n),this._comparator),this._changeCb(this._value)}function N(t,e){var n=Math.floor(t.getTime()/1e3);return n-=n%86400,e===QueryBuilderConstants.COMPARATOR_LESS_EQUAL&&(n+=86399),n}var P=(Q.defaultValue=function(t){return-10080},Q.prototype.render=function(){var t=this,n=this._value,i=1,e=p('<input class="age-count" type="number" />'),r=p('<select class="age-unit"/>'),s=p('<select class="age-unit"></select>'),a={Minutes:1,Hours:60,Days:1440,Weeks:10080},o=[];for(var u in a)a.hasOwnProperty(u)&&o.push([u,a[u]]);o.sort(function(t,e){return t[1]-e[1]}),p.each(o.slice().reverse(),function(t,e){if(n%e[1]==0)return i=e[1],n/=e[1],!1}),p.each(o,function(t,e){var n=p("<option>").val(e[1]).text(e[0]);i===e[1]&&n.prop("selected",!0),r.append(n)}),e.val(Math.abs(n));var l=p('<option value="-1">Ago</option>'),h=p('<option value="1">From now</option>');this._value<=0?l.prop("selected",!0):h.prop("selected",!0),s.append(l,h);var d=p().add(e).add(r).add(s);return d.on("change",function(){t._changeCb(e.val()*r.val()*s.val())}),d},Q);function Q(t,e,n,i){this._comparator=e,this._definition=t,this._changeCb=i,this._value=null===n?Q.defaultValue(t):n,this._changeCb(this._value)}var M=(b.prototype._update=function(){this._changeCb(this._minVal+","+this._maxVal)},b.defaultValue=function(t){if(t.dataType===QueryBuilderConstants.DATATYPE_DATE){var e=v.defaultValue(t);return e+","+e}if(t.dataType!==QueryBuilderConstants.DATATYPE_TIMESTAMP_DAY)return"0,0";var n=E.defaultValue(t);return n+","+(n+86399)},b.prototype._minUp=function(t){this._minVal=t,this._update()},b.prototype._maxUp=function(t){this._maxVal=t,this._update()},b.prototype.render=function(){var t=this._minUp.bind(this),e=this._maxUp.bind(this),n=this._value.split(",");switch(this._definition.dataType){case QueryBuilderConstants.DATATYPE_DECIMAL:r=new T(this._definition,this._comparator,n[0],t).render(),s=new T(this._definition,this._comparator,n[1],e).render();break;case QueryBuilderConstants.DATATYPE_NUMBER:r=new R(this._definition,this._comparator,n[0],t).render(),s=new R(this._definition,this._comparator,n[1],e).render();break;case QueryBuilderConstants.DATATYPE_TIMESTAMP_DAY:var i=QueryBuilderConstants.COMPARATOR_LESS_EQUAL,r=new E(this._definition,this._comparator,n[0],t).render(),s=new E(this._definition,i,n[1],e).render();break;case QueryBuilderConstants.DATATYPE_DATE:r=new v(this._definition,this._comparator,n[0],t).render(),s=new v(this._definition,this._comparator,n[1],e).render();break;default:r=new _(this._definition,this._comparator,n[0],t).render(),s=new _(this._definition,this._comparator,n[1],e).render()}return r.addClass("qb-between-min"),s.addClass("qb-between-max"),p().add(r).add(s)},b);function b(t,e,n,i){this._comparator=e,this._definition=t,this._changeCb=i;var r=(n=null===n||n===s||-1===String(n).indexOf(",")?b.defaultValue(t):n).split(",");this._minVal=r[0],this._maxVal=r[1],this._value=this._minVal+","+this._maxVal,this._changeCb(this._value)}}(jQuery,window,void document),function(t,e,n){"use strict";e.QueryBuilderConstants=e.QueryBuilderConstants||{},QueryBuilderConstants.COMPARATOR_MATCH="match",QueryBuilderConstants.COMPARATOR_NOT_MATCH="nmatch",QueryBuilderConstants.COMPARATOR_MATCH_PHRASE="matchphrase",QueryBuilderConstants.COMPARATOR_NOT_MATCH_PHRASE="nmatchphrase",QueryBuilderConstants.COMPARATOR_MATCH_PHRASE_PREFIX="matchphrasepre",QueryBuilderConstants.COMPARATOR_NOT_MATCH_PHRASE_PREFIX="nmatchphrasepre",QueryBuilderConstants.COMPARATOR_WILDCARD="wild",QueryBuilderConstants.COMPARATOR_NOT_WILDCARD="nwild",QueryBuilderConstants.COMPARATOR_FUZZY="fuzzy",QueryBuilderConstants.COMPARATOR_NOT_FUZZY="nfuzzy",t(n).on("init.querybuilder",function(t,e,n){n.setComparatorName(QueryBuilderConstants.COMPARATOR_MATCH,"Match Any"),n.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_MATCH,"Does Not Match Any"),n.setComparatorName(QueryBuilderConstants.COMPARATOR_MATCH_PHRASE,"Matches Phrase"),n.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_MATCH_PHRASE,"Does Not Match Phrase"),n.setComparatorName(QueryBuilderConstants.COMPARATOR_MATCH_PHRASE_PREFIX,"Matches Phrase Prefix"),n.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_MATCH_PHRASE_PREFIX,"Does Not Match Phrase Prefix"),n.setComparatorName(QueryBuilderConstants.COMPARATOR_WILDCARD,"Wildcard Match"),n.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_WILDCARD,"Does Not Match Wildcard"),n.setComparatorName(QueryBuilderConstants.COMPARATOR_FUZZY,"Fuzzy Match With"),n.setComparatorName(QueryBuilderConstants.COMPARATOR_NOT_FUZZY,"Does Not Fuzzy Match With")})}(jQuery,window,document),function(s,t,e){"use strict";t.QueryBuilderConstants=t.QueryBuilderConstants||{};var a=[QueryBuilderConstants.COMPARATOR_IN,QueryBuilderConstants.COMPARATOR_NOT_IN,QueryBuilderConstants.COMPARATOR_LIKE_IN,QueryBuilderConstants.COMPARATOR_NOT_LIKE_IN],i=(r.defaultValue=function(t){return 0},r.prototype.sanitize=function(t){return-1===a.indexOf(this._comparator)?("object"==typeof t&&(t=t&&t[0]?t[0]:""),t=t||""):("string"==typeof t&&(t=t?[t]:null),t&&0===t.length&&(t=null)),t},r.prototype.tokenChanged=function(t,e,n){var i=this._selectBox.tokenize2(),r=i.toArray();1===i.options.tokensMaxItems&&1===r.length&&(r=r[0]);var s=this._comparator;s===QueryBuilderConstants.COMPARATOR_IN||s===QueryBuilderConstants.COMPARATOR_NOT_IN||s===QueryBuilderConstants.COMPARATOR_LIKE_IN||s===QueryBuilderConstants.COMPARATOR_NOT_LIKE_IN?this._changeCb(r.length?r:void 0):this._changeCb(r.length?r:"")},r.prototype.render=function(){return this._selectBox=s('<select class="qb-tokenizer qb-input" multiple/>')},r.prototype.postRender=function(){var n,i=this,t=this._definition,r=this._value;r instanceof Object||(r=[r]),t.hasValues()&&(n=s.extend({},t.values),s.each(r,function(t,e){-1===Object.keys(n).indexOf(e)&&(n[e]=e)}),s.each(n,function(t){var e;t&&(e=s("<option/>").text(n[t]).val(encodeURIComponent(t)),-1<r.indexOf(t)&&e.prop("selected",!0),i._selectBox.append(e))}));var e={debounce:250};e.tokensAllowCustom=!t.isStrict(),t.hasAjaxValues()&&(e.dataSource=t.valuesUrl),-1===a.indexOf(this._comparator)&&(e.tokensMaxItems=1),this._selectBox.tokenize2(e),s.each(r,function(t,e){null!==e&&(i._selectBox.trigger("tokenize:dropdown:itemAdd",{value:e,text:e}),i._selectBox.trigger("tokenize:tokens:add",[e,e,!0]))}),s(this._selectBox).on("tokenize:tokens:add tokenize:tokens:remove tokenize:clear",function(t,e,n){i.tokenChanged(e,n,t)})},r);function r(t,e,n,i){this._comparator=e,this._definition=t,this._changeCb=i,this._value=null===n?r.defaultValue():n}s(e).on("init.querybuilder",function(t,e,n){e.addInputTypeProcessor(function(t,e){if(e&&(e.hasAjaxValues()||e.hasValues()&&!e.isStrict()||-1<a.indexOf(t)))return i})})}(jQuery,window,document);