!function(a){function b(a){this._ele=a,this._options=[],this._rules=[]}a.fn.qb=function(c,d){if(c||(c="init"),"function"!=typeof b.prototype[c])return void console.error("QueryBuilder command '"+c+"' not found");var e=Array.prototype.slice.call(arguments);e.shift();var f=null;return a(this).each(function(){var d=a(this),g=d.data("qb");g||(d.data("qb",new b(this)),g=d.data("qb")),f=g[c].apply(g,e)}),f},a(document).on("change",".qb-rule .qb-key",function(){a(this).closest(".qb-container").qb("addRule",{key:a(this).val()},a(this).parent().index())}),a(document).on("click","button.qb-delRule",function(){a(this).closest(".qb-rules .qb-rule").remove()}),a(document).on("click","button.qb-addRule",function(){a(this).closest(".qb-container").qb("addRule")}),b.prototype.init=function(){var b=this,c=a(this._ele).attr("data-qb-options"),d=a(this._ele).attr("data-qb-rules");c&&a.getJSON(c,{},function(a){b.options(a)}),d&&a.getJSON(d,{},function(a){b.rules(a)})},b.prototype.options=function(a){this._options=a,this.redraw()},b.prototype.rules=function(b){if("undefined"==typeof b){var c=[];return a(".qb-rules .qb-rule",a(this._ele)).each(function(){var b=a(".qb-key",this).val();b&&c.push({key:b,comparator:a(".qb-comparator",this).val(),value:a(".qb-value",this).val()})}),c}this._rules=b,this.redraw()},b.prototype.redraw=function(){var b=this;a(this._ele).addClass("qb-container").html(a('<div class="qb-rules"/>')).append(a('<button class="qb-addRule">+</button>')),b._options&&b._rules&&a.each(b._rules,function(){b.addRule(this)})},b.prototype.addRule=function(b,c){var d=a('<div class="qb-rule"/>'),e=a('<select class="qb-key"/>').appendTo(d),f=b?b.key:null,g=f?this._options[f]:null;if(e.append("<option/>"),a.each(this._options,function(a){var b=f==a;e.append('<option value="'+a+'"'+(b?' selected="selected"':"")+">"+this.display+"</option>")}),g){var h=a('<select class="qb-comparator"/>').appendTo(d);a.each(g.comparators,function(a){var c=b.comparator==a;h.append('<option value="'+a+'"'+(c?' selected="selected"':"")+">"+this+"</option>")}),a('<input class="qb-value" type="text" value="'+(b.value?b.value:"")+'"/>').appendTo(d)}a('<button class="qb-delRule"><i class="fa fa-trash"></i></button>').appendTo(d),"undefined"!=typeof c?a(".qb-rule:eq("+c+")",this._ele).replaceWith(d):d.appendTo(a(".qb-rules",this._ele))}}(jQuery);var FortifiContentElements={};